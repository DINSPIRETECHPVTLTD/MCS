<app-header-menu 
  [activeMenu]="activeMenu"
  (menuChange)="onMenuChange($event)"
  (branchChange)="onBranchChange($event)">
  <ion-content [fullscreen]="true">
  <div class="loan-list-container">
    <div class="loan-filter" style="display: flex; gap: 12px; align-items: center; margin-bottom: 16px;">
      <div style="flex: 1; display: flex; align-items: center; gap: 12px;">
        <h2 style="margin: 0">All Loans</h2>
      </div>
    </div>

    <div *ngIf="isLoading" class="loading-state">
      <ion-spinner name="crescent"></ion-spinner>
      <p>Loading loans...</p>
    </div>

    <div *ngIf="!isLoading && getCurrentBranchId() == null" class="empty-state">
      <ion-icon name="business-outline" size="large"></ion-icon>
      <p>Select a branch</p>
      <p class="empty-hint">Choose a branch from the header to view its loans.</p>
    </div>

    <div *ngIf="!isLoading && getCurrentBranchId() != null && loans.length === 0" class="empty-state">
      <ion-icon name="document-text-outline" size="large"></ion-icon>
      <p>No loans found</p>
      <p class="empty-hint">There are no loans for this branch.</p>
    </div>

    <div *ngIf="!isLoading && loans.length > 0" class="ag-grid-wrapper">
      <ag-grid-angular
        class="ag-theme-alpine"
        style="width: 100%; height: 60vh;"
        [rowData]="rowData"
        [columnDefs]="columnDefs"
        [gridOptions]="gridOptions"
        [defaultColDef]="defaultColDef"
        [pagination]="pagination"
        [paginationPageSize]="paginationPageSize"
        [paginationPageSizeSelector]="paginationPageSizeSelector"
        [context]="gridContext"
        (gridReady)="onGridReady($event)">
      </ag-grid-angular>
    </div>
  </div>
  </ion-content>
</app-header-menu>
