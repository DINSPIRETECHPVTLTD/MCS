<app-header-menu 
  [activeMenu]="activeMenu"
  (menuChange)="onMenuChange($event)"
  (branchChange)="onBranchChange($event)">
  <ion-content [fullscreen]="true" class="ion-padding">
  <div class="content-container">
    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px;">
      <h1>Add Loan</h1>
    </div>
    
    <!-- Search Member -->
    <ion-card class="step-card">
      <ion-card-header class="step-header">
        <ion-card-title>Search Member</ion-card-title>
      </ion-card-header>
      <ion-card-content>
        <div class="search-section">
          <div class="search-fields">
            <ion-input
              [(ngModel)]="searchFirstName"
              placeholder="First Name"
              (keypress)="onSearchKeyPress($event)"
              class="search-input">
            </ion-input>
            <ion-input
              [(ngModel)]="searchLastName"
              placeholder="Last Name"
              (keypress)="onSearchKeyPress($event)"
              class="search-input">
            </ion-input>
            <ion-input
              [(ngModel)]="searchMemberId"
              placeholder="Member ID"
              (keypress)="onSearchKeyPress($event)"
              class="search-input">
            </ion-input>
            <ion-button 
              (click)="searchMembers()" 
              [disabled]="isSearching || (!searchFirstName.trim() && !searchLastName.trim() && !searchMemberId.trim())"
              class="search-button">
              <ion-icon name="search-outline" slot="start"></ion-icon>
              Search
            </ion-button>
          </div>
          
          <!-- Member grid -->
          <div *ngIf="showMemberGrid && rowData.length > 0" class="grid-container">
            <ag-grid-angular
              class="ag-theme-alpine"
              style="width: 100%; height: 30vh;"
              [gridOptions]="gridOptions"
              [rowData]="rowData"
              [columnDefs]="columnDefs"
              [defaultColDef]="defaultColDef"
              [pagination]="pagination"
              [paginationPageSize]="paginationPageSize"
              [context]="gridContext"
              (gridReady)="onGridReady($event)">
            </ag-grid-angular>
          </div>
          
          <div *ngIf="rowData.length === 0 && !isSearching" class="empty-state">
            <ion-icon name="search-outline" size="large"></ion-icon>
            <p>Search by First Name, Last Name, or Member ID and click Search</p>
          </div>
        </div>
      </ion-card-content>
    </ion-card>
  </div>
  </ion-content>
</app-header-menu>
