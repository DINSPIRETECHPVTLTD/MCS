<app-header-menu 
  [activeMenu]="activeMenu"
  (menuChange)="onMenuChange($event)"
  (branchChange)="onBranchChange($event)">
</app-header-menu>

<ion-content [fullscreen]="true" class="ion-padding">
  <!-- Staff List -->
  <div class="staff-list-container">
    <form [formGroup]="staffForm" class="staff-filter" style="display:flex; gap:12px; align-items:center; margin-bottom:16px;">
      <div style="flex:1; display:flex; align-items:center; gap:12px;">
        <h2 style="margin:0">All Staff</h2>
        <ion-item style="--padding-start:8px; --padding-end:8px; width:220px; margin-left:8px;">
          <ion-label>Role</ion-label>
          <ion-select formControlName="role" interface="popover" placeholder="All" (ionChange)="loadStaff()">
            <ion-select-option value="">All</ion-select-option>
            <ion-select-option value="BranchAdmin">Branch Admin</ion-select-option>
            <ion-select-option value="Staff">Staff</ion-select-option>
          </ion-select>
        </ion-item>
      </div>

      <div style="display:flex; gap:8px;">
        <ion-button (click)="toggleAddForm()">
          <ion-icon name="add-outline" slot="start"></ion-icon>
          Add Staff
        </ion-button>
      </div>
    </form>
    
    <!-- Debug info -->
    <div style="background: #f0f0f0; padding: 10px; margin-bottom: 10px; border-radius: 4px; font-size: 12px;">
      <p style="margin: 0;">Staff count: {{ staff.length }}</p>
      <p style="margin: 4px 0 0 0;">Loading: {{ isLoading ? 'Yes' : 'No' }}</p>
    </div>
    
    <div *ngIf="staff.length === 0 && !isLoading" class="empty-state">
      <ion-icon name="people-outline" size="large"></ion-icon>
      <p>No staff found</p>
      <p style="font-size: 12px; margin-top: 8px; color: var(--ion-color-medium);">
        Click "Add Staff" to create a new staff member
      </p>
    </div>
    <div class="ag-theme-alpine" style="height:600px; width:100%">
      <ag-grid-angular
        [rowData]="rowData"
        [columnDefs]="columnDefs"
        [defaultColDef]="defaultColDef"
        [pagination]="pagination"
        [paginationPageSize]="paginationPageSize"
        (gridReady)="onGridReady($event)">
      </ag-grid-angular>
      <div *ngIf="staff.length === 0 && !isLoading" class="empty-overlay" style="position:absolute; inset:0; display:flex; align-items:center; justify-content:center; pointer-events:none;">
        <div style="background: rgba(255,255,255,0.9); padding: 16px 20px; border-radius:8px; text-align:center; pointer-events:auto;">
          <p style="margin:0; font-weight:600">No staff found</p>
          <p style="margin:6px 0 0 0; font-size:12px; color:var(--ion-color-medium)">Click "Add Staff" to create a new staff member</p>
        </div>
      </div>
    </div>
  </div>
</ion-content>

